<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam Auth</title>
</head>
<body>
    <h1>Авторизация через Steam</h1>

    <!-- Кнопка авторизации -->
    <button onclick="login()">Войти через Steam</button>

    <!-- Кнопка получения событий -->
    <button onclick="getEvents()">Получить события</button>

    <div id="status"></div>
    <div id="events"></div>

    <script>
        const API_URL = "http://localhost:8000"; // Адрес бэкенда

        function login() {
            window.location.href = `${API_URL}/auth/login`; // Перенаправляем пользователя
        }

        async function getEvents() {
            try {
                const response = await fetch(`${API_URL}/events/get`, {
                    method: "GET",
                    credentials: "include", // Отправляем куки с запросом
                    headers: { "Content-Type": "application/json" },
                });

                if (!response.ok) throw new Error("Ошибка: " + response.status);

                const data = await response.json();
                document.getElementById("events").innerText = JSON.stringify(data, null, 2);
            }
        }
    </script>
</body>
</html>
